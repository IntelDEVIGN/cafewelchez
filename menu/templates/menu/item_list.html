{% extends "baseList.html" %}
{% load humanize %}
{% load static %}{% block cTitle %}Platos{% endblock %}{% block pTitle %}Platos{% endblock %}
{% block theader %}
    <th data-priority="2">Orden</th>
    <th data-priority="1">Plato</th>
{#    <th data-priority="8">Slug</th>#}
{#    <th data-priority="7">Creado</th>#}
{#    <th data-priority="6">Actualizado</th>#}
    <th data-priority="5">Descripci√≥n</th>
    <th class="center" data-priority="3">Precio 1</th>
    <th class="center" data-priority="6">Precio 2</th>
    <th class="center" data-priority="4">Activo</th>
{% endblock %}
{% block tbody %}
    {% for object in object_list %}
        <tr>
        <td>{{ object.orden }}</td>
            <td><a href="{{ object.get_absolute_url }}">{% if object.nivel > 1 %}&nbsp;&nbsp;&nbsp;&mdash;{% endif %}{{ object }}</a>
                {% if request.user.is_superuser %}
                    <span class="minipopuplink">
                        <a id="cursorPos-i{{ object.id }}" href="#" onclick="openModal_i{{ object.id }}()">
                            <i class="material-icons">more_vert</i></a>
                    </span>
                {% endif %}</td>
{#            <td>{{ object.slug }}</td>#}
{#            <td>{{ object.creado }}</td>#}
{#            <td>{{ object.actualizado }}</td>#}
            <td>{{ object.descripcion }}</td>
            <td class="center">{{ object.precio|intcomma }}</td>
            <td class="center">{{ object.precio_2|intcomma }}</td>
            <td class="center">{{ object.activo|yesno }}</td>
        </tr>
    {% endfor %}
{% endblock %}{% block footer %}
    <div class="fixed-action-btn">
        <a class="btn-floating btn-large darkblue" href="{% url 'menu_item_create' %}">
            <i class="large material-icons">add</i>
        </a>
{#        <ul>#}
{#            <li><a class="btn-floating red"#}
{#                   href="{% url 'menu_item_create' %}"><i class="material-icons">insert_chart</i></a></li>#}
{#            <li><a class="btn-floating yellow darken-1"><i class="material-icons">format_quote</i></a></li>#}
{#            <li><a class="btn-floating green"><i class="material-icons">publish</i></a></li>#}
{#            <li><a class="btn-floating blue"><i class="material-icons">attach_file</i></a></li>#}
{#        </ul>#}
    </div>
    {% if request.user.is_superuser %}
        {% for object in object_list %}
            <div class="modal-open">
                <div class="minipopup3" id="modal_i{{ object.id }}">
                    <ul class="ui-listview">
                        <li>
                            <a title="Seleccionar Plato {{ object }}" data-ajax="false"
                               onclick="window.location.reload(false);"
                               href="{{ object.get_absolute_url }}">
                                <i class="material-icons">arrow_forward</i> Seleccionar</a></li>
                        <li>
                            <a title="Editar Plato {{ object }}"
                               href="{{ object.get_update_url }}">
                                <i class="material-icons">edit</i> Editar</a></li>
                        <li>
                            <a title="Eliminar Plato {{ object }}"
                               href="{{ object.get_delete_url }}">
                                <i class="material-icons">delete</i> Borrar</a></li>
                    </ul>
                    <div class="ui-popup-arrow-container ui-popup-arrow-t">
                        <div class="ui-popup-arrow ui-body-a ui-overlay-shadow"></div>
                    </div>
                </div>
            </div>
            <script type="text/javascript">

                $(document).ready(function () {
                    $('#cursorPos-i{{ object.id }}').click(function (e) {
                        var offset = $(this).offset();
                        console.log('offset: ' + offset);
                        console.log('offset.top: ' + offset.top);
                        console.log('offset.left: ' + offset.left);
                        console.log('e.clientX: ' + e.clientX);
                        console.log('e.clientY: ' + e.clientY);

                        $('.modal-open').css({
                            'top': (offset.top + 36),
                            'left': (offset.left - 52)
                        });
                    });
                    $('select').material_select();

                });

                function openModal_i{{ object.id }}() {
                    $('#modal_i{{ object.id }}').openModal();
                }
            </script>
        {% endfor %}
    {% endif %}{% endblock %}
